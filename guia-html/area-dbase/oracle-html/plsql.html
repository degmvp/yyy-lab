<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <title>Oracle 23c – Guia de Comandos</title>
  <style>
    html,body{height:100%;margin:0;}
    body{
      background: linear-gradient(135deg, purple, orange);
      color:#fff;
      font-family: Arial, Helvetica, sans-serif;
      line-height:1.5;
    }
    main{
      max-width: 1080px;
      margin: 0 auto;
      padding: 2rem 1.5rem;
      background: rgba(255,255,255,0.10);
      border-radius: 16px;
      backdrop-filter: blur(6px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }
    h1,h2,h3{margin-top:2rem;margin-bottom:1rem;color:#fff;}
    pre{
      background: rgba(0,0,0,0.45);
      padding: 1rem 1.25rem;
      border-radius: 10px;
      overflow-x: auto;
      font-size: 0.95rem;
    }
    code{color:#ffe;}
    a{color:#fff;}
  </style>
</head>
<body>
<main>
  <h1>Guia de Comandos Oracle 23c</h1>
  <p>Este documento reúne exemplos comentados de comandos DDL, DML, DCL, TCL, rotinas PL/SQL e consultas administrativas executados no Oracle 23c. Use-o como referência rápida em laboratórios e ambientes de produção.</p>

  <h2>1. Conexão ao banco</h2>
  <pre><code>sqlplus /nolog
CONNECT sys/LWRrsx45831@FREE AS SYSDBA</code></pre>
  <p>Abre o SQL*Plus sem autenticar e, em seguida, conecta como SYSDBA.</p>

  <h2>2. Usuários e schemas</h2>
  <pre><code>SELECT username FROM all_users;
ALTER SESSION SET CURRENT_SCHEMA = usradm;</code></pre>
  <p>Lista todos os usuários e define o schema padrão da sessão para <code>USRADM</code>.</p>

  <h2>3. Tabelas e dados exemplares</h2>
  <pre><code>CREATE TABLE USRADM.CLIENTES (
    ID_CLIENTE NUMBER GENERATED BY DEFAULT AS IDENTITY,
    NOME       VARCHAR2(100),
    EMAIL      VARCHAR2(150),
    DATA_CADASTRO DATE DEFAULT SYSDATE,
    PRIMARY KEY (ID_CLIENTE)
);

INSERT INTO USRADM.CLIENTES (NOME, EMAIL) VALUES ('Maria Silva','maria@email.com');
INSERT INTO USRADM.CLIENTES (NOME, EMAIL) VALUES ('Degmar Barbosa','dondeg@email.com');
COMMIT;
SELECT * FROM USRADM.CLIENTES;</code></pre>

  <h2>4. Formatação no SQL*Plus</h2>
  <pre><code>SET LINESIZE 1000
SET PAGESIZE 50000
SET COLSEP ' | '
COLUMN ID_CLIENTE FORMAT 999999 HEADING 'ID_CLIENTE'
COLUMN NOME FORMAT A40 HEADING 'NOME'
SELECT ID_CLIENTE,NOME,EMAIL FROM USRADM.CLIENTES;</code></pre>

  <h2>5. Visões de dicionário e uso de tablespaces</h2>
  <pre><code>SELECT owner, table_name, tablespace_name, status
  FROM all_tables
 WHERE owner = 'USRADM';

SELECT tablespace_name, status, contents, extent_management
  FROM dba_tablespaces;</code></pre>

  <h2>6. Espaço em disco</h2>
  <pre><code>SELECT file_name, tablespace_name, bytes/1024/1024 AS "Size MB", autoextensible
  FROM dba_data_files;

/* Uso / Livre por tablespace */
SELECT df.tablespace_name "Tablespace",
       df.bytes/1024/1024 "Size MB",
       (df.bytes-fs.bytes)/1024/1024 "Used MB",
       fs.bytes/1024/1024 "Free MB",
       ROUND(100*(df.bytes-fs.bytes)/df.bytes) "Used %"
  FROM (SELECT tablespace_name, SUM(bytes) bytes FROM dba_data_files GROUP BY tablespace_name) df,
       (SELECT tablespace_name, SUM(bytes) bytes FROM dba_free_space GROUP BY tablespace_name) fs
 WHERE df.tablespace_name = fs.tablespace_name;</code></pre>

  <h2>7. Backup de tabelas</h2>
  <pre><code>CREATE TABLE BKPCLI AS
SELECT * FROM USRADM.CLIENTES;

-- Estrutura sem dados
CREATE TABLE BKPCLI_EMPTY AS
SELECT * FROM USRADM.CLIENTES WHERE 1=0;</code></pre>

  <h2>8. Metadados e DESCRIBE</h2>
  <pre><code>DESCRIBE USRADM.CLIENTES;
SELECT DBMS_METADATA.GET_DDL('TABLE','CLIENTES','USRADM') FROM DUAL;</code></pre>

  <h2>9. Procedimentos e inserções via PL/SQL</h2>
  <pre><code>CREATE OR REPLACE PROCEDURE USRADM.PROC_INSERT (
  P_NOME  IN VARCHAR2,
  P_EMAIL IN VARCHAR2,
  P_CPF   IN VARCHAR2
) AS
BEGIN
  INSERT INTO USRADM.ALUNOS(NOME, EMAIL, CPF)
  VALUES (P_NOME, P_EMAIL, P_CPF);
  COMMIT;
EXCEPTION
  WHEN OTHERS THEN
    ROLLBACK;
    RAISE;
END;
/

BEGIN
  USRADM.PROC_INSERT('Degmar Barbosa','dondeg@email.com','03890805434');
END;
/
SELECT * FROM USRADM.ALUNOS;</code></pre>

  <h2>10. Views e objetos</h2>
  <pre><code>CREATE OR REPLACE VIEW USRADM.VW_ALUNOS_DADOS AS
SELECT ID_ALUNOS, NOME, EMAIL, CPF FROM USRADM.ALUNOS;

SELECT OBJECT_NAME FROM ALL_OBJECTS WHERE OBJECT_TYPE='PROCEDURE' AND OWNER='USRADM';</code></pre>

  <h2>11. Novos recursos do Oracle 23c</h2>
  <pre><code>ALTER TABLE clientes ADD premium BOOLEAN DEFAULT FALSE;
UPDATE clientes SET premium = TRUE WHERE salario > 10000;

SELECT * FROM pedidos WHERE JSON_EQUAL(dados_pedido.forma_pagamento, '"cartao"');</code></pre>

  <footer style="margin-top:3rem;text-align:center;font-size:0.9rem;">© 2025 – Documento de referência Oracle 23c</footer>
</main>
</body>
</html>
